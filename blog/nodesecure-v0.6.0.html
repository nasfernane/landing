<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/index.css" />
  <link rel="stylesheet" href="../css/blog.css" />
  <title>NodeSecure - Blog</title>
</head>

<body>
  <canvas id="network-bg"></canvas>

  <header class="blogHeader">
    <div class="header-background"></div>
    <div class="header-content centered-content">
      <img src="https://avatars.githubusercontent.com/u/85318671?s=200&v=4" alt="NodeSecure Logo"
        style="width:80px;height:80px;border-radius:20px;background:#fff2;box-shadow:0 2px 8px #0002;margin-bottom:1.2rem;">
      <h1>
        NodeSecure Blog
      </h1>
      <p class="subtitle">
        Building a safer Node.js and JavaScript ecosystem
      </p>
      <p class="description">We are a community of developers building free open source tools to secure the Node.js & JavaScript ecosystem. Our area of expertise is <b>SCA</b> (Software Composition Analysis).</p>
      <div class="header-buttons">
        <a href="https://github.com/NodeSecure" target="_blank" title="NodeSecure on GitHub" class="view-on-github">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/github.svg" alt="GitHub"
            style="width:28px;height:28px;filter:invert(1) brightness(2);">
          <span>View on GitHub</span>
        </a>
        <a href="https://discord.gg/4Wn8rjAtB4" target="_blank" title="Join our Discord" class="view-on-discord">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord"
            style="width:28px;height:28px;filter:invert(1) brightness(2);">
          <span>Join Discord</span>
        </a>
        <a href="./index.html" title="Visit our blog" class="view-on-discord">
          <img width="64" height="64" src="https://img.icons8.com/glyph-neue/64/circled-left-2.png"   style="width:28px;height:28px;filter:invert(1) brightness(2);" alt="Back to blog"/>
          <span>Back to blog</span>
        </a>
      </div>
    </div>
  </header>
  <main>
    <article-content 
        title="NodeSecure release v0.6.0" 
        content="<p>Hello world!</p>
<p>I recently published the release v0.6.0 of <a href=&quot;https://github.com/ES-Community/nsecure&quot;>Node-secure</a>. If you missed the previous articles:</p>
<ul>
<li><a href=&quot;https://dev.to/fraxken/node-secure-release-v0-5-0-16o6&quot;>Release v0.5.0</a></li>
<li><a href=&quot;https://dev.to/fraxken/node-secure-release-v0-4-0-2oih&quot;>Release v0.4.0</a> (<strong>include a presentation of the project</strong>).</li>
</ul>
<p>These past weeks I have worked hard on exporting the AST Analysis in is own npm package <strong>js-x-ray</strong>. I have <a href=&quot;https://dev.to/fraxken/node-secure-js-x-ray-4jk0&quot;>written an article on this</a> subject recently if you want to know more.</p>
<p>As usual we will review the new features that version 0.6.0 brings.</p>
<h1>New features</h1>
<hr>
<h2>no more AST analysis and more coverage</h2>
<p>The AST analysis has been moved to the <a href=&quot;https://github.com/fraxken/js-x-ray&quot;>js-x-ray</a> package. This notably allowed to reduce the number of tests to maintain.</p>
<p>Even more tests have been added to enhance the coverage by ten percent (95%).</p>
<h2>webpack</h2>
<p>All front-end assets is now bundled with webpack. This slightly improves the maintainability of front assets and codes.</p>
<p>The configuration is surely not perfect, and a lot of space could surely be saved for the package tarball.</p>
<h2>i18n</h2>
<p>This version allows for new languages to be added. The current version support both <strong>English</strong> and <strong>French</strong> (which is my native language).</p>
<p><img src=&quot;https://i.imgur.com/vlI3laN.gif&quot; alt=&quot;&quot;></p>
<p>The tokens cover all the parts of Node-secure (CLI, API and UI). However, the UI is not entirely finished because a lot of text is added through the JavaScript code (I will work on improving the surface for the next version.).</p>
<p>Feel free to pull-request your own language (or help with existing one). There is a root <code>i18n</code> directory on the Github.</p>
<p>The <code>lang</code> command has been added to be able to switch between languages.</p>
<pre><code class=&quot;language-bash&quot;>$ nsecure lang
</code></pre>
<h2>used by + npm home page</h2>
<p>Move between parent and children easily with the left menu (used by / third-party dependencies).</p>
<p>And a new link to open the npm package page.</p>
<p><img src=&quot;https://media.discordapp.net/attachments/605589188309680141/696660709399855114/unknown.png&quot; alt=&quot;&quot;></p>
<h2>multiple filters searchbar</h2>
<p>The new searchbar allows to search anything on the tree (graph) by multiple criteria (filters). The current available filters are:</p>
<ul>
<li>package (<strong>the default filter if there is none</strong>).</li>
<li>version (take a semver range as an argument).</li>
<li>flag (list of available flags in the current payload/tree).</li>
<li>license (list of available licenses in the current payload/tree).</li>
<li>author (author name/email/url).</li>
<li>ext (list of available file extensions in the current payload/tree).</li>
<li>builtin (available Node.js core module name).</li>
</ul>
<p>Exemple of query:</p>
<pre><code>version: &gt;=1.2 | 2, ext: .js, builtin: fs
</code></pre>
<p>The searchbar and some of the filters still require a huge amount of work to work properly (example: there is missing flags). So don't worry we will work to improve it for the next version!</p>
<p><img src=&quot;https://i.imgur.com/qsJRh00.gif&quot; alt=&quot;&quot;></p>
<h2>new verify command</h2>
<pre><code class=&quot;language-bash&quot;>$ nsecure verify express
</code></pre>
<p>This new command has only been fully implemented as API but not yet full featured for the CLI. I created the command to run complete and advanced analysis on a given npm package.</p>
<p>Why ?</p>
<ul>
<li>Better precision on the SourceLocation of each required dependency.</li>
<li>More metadata (which we should normally avoid to not make the json too heavy).</li>
</ul>
<p>And maybe more in the future. In CLI the command only print the JSON payload to the terminal.</p>
<pre><code class=&quot;language-ts&quot;>interface VerifyPayload {
    files: {
        list: string[];
        extensions: string[];
        minified: string[];
    };
    directorySize: number;
    uniqueLicenseIds: string[];
    licenses: License[];
    ast: {
        dependencies: {
            [fileName: string]: Dependencies;
        };
        warnings: Warning[];
    };
}
</code></pre>
<h2>global warnings</h2>
<p>The root of the Node-secure JSON has been completely refactored to allow new metadata to appear in the future.</p>
<pre><code class=&quot;language-json&quot;>{
  &quot;id&quot;: &quot;7743b4ef&quot;,
  &quot;rootDepencyName&quot;: &quot;express&quot;,
  &quot;warnings&quot;: [],
  &quot;dependencies&quot;: {}
}
</code></pre>
<p>And one of the new root metadata is <strong>warnings</strong>. At the moment these are just simple warning messages.</p>
<p><img src=&quot;https://i.imgur.com/BVsiQdN.jpg&quot; alt=&quot;&quot;></p>
<blockquote>
<p>Example with @scarf/scarf which is a package that collect data <strong>against your will by default</strong>.</p>
</blockquote>
<p>These warnings will obviously evolve over time!</p>
<h2>New warnings</h2>
<p>New experimental warnings were added by the js-x-ray AST analysis:</p>
<ul>
<li><strong>unsafe-stmt</strong> (eval or Function(&quot;...&quot;))</li>
<li><strong>hexa-value</strong> (An hex value has been detected in a Literal)</li>
<li><strong>short-ids</strong> (This mean that all identifiers has an average length below 1.5. Only possible if the file contains more than 5 identifiers).</li>
<li><strong>suspicious-string</strong></li>
</ul>
<p>Hexa-value is not a much relevant as we want yet (we will work to remove 80-90% of false positives).</p>
<blockquote>
<p>Please feel free to feedback on these warnings! Making them as precise as possible is essential to achieve the goal of Node-secure.</p>
</blockquote>
<h2>Better AST Analysis</h2>
<p>At least 20 to 30 hours of work have been invested on the <a href=&quot;https://github.com/fraxken/js-x-ray&quot;>js-x-ray</a> package. The current release detects major security threats in <strong>ALL</strong> Node.js code payload of the precedent attacks and issues (some are hosted on <a href=&quot;https://badjs.org/&quot;>badjs</a>.).</p>
<blockquote>
<p>If you think you have a code that is not detected then open an issue (We'll make sure to detect it in the future.).</p>
</blockquote>
<p>At the beginning of the project we laughed about how cool it would be to be able to detect what's going on in the following code:</p>
<pre><code class=&quot;language-js&quot;>function unhex(r) {
    return Buffer.from(r, &quot;hex&quot;).toString();
}

const g = eval(&quot;this&quot;);
const p = g[&quot;pro&quot; + &quot;cess&quot;];

const evil = p[&quot;mainMod&quot; + &quot;ule&quot;][unhex(&quot;72657175697265&quot;)];
evil(unhex(&quot;68747470&quot;)).request
</code></pre>
<p>But it's no longer a dream...</p>
<pre><code>required:
[ 'http' ]

warnings:
[
  'unsafe-stmt -&gt; eval',
  'unsafe-assign -&gt; g.process',
  'unsafe-assign -&gt; p.mainModule.require',
  'hexa-value -&gt; require',
  'unsafe-import -&gt; http'
]
</code></pre>
<p><em>(this is a simple log, there a much more available informations like SourceLocation etc)</em></p>
<h2>New flag ‚öîÔ∏è hasBannedFile</h2>
<p><em>No more inspiration for emoji üòÖ</em></p>
<p>This new flag uses the API entry of the package <a href=&quot;https://github.com/bahmutov/ban-sensitive-files&quot;>ban-sensitive-files</a>. This highlight that the project has at least one sensitive file (or a file with sensitive information in it).</p>
<p>File like .pem or .key are considered <strong>sensitive</strong>.</p>
<h2>A lot of fix and improvement</h2>
<ul>
<li>Fix UI popup overflow-y and add a max-height.</li>
<li>Fix Node.js fs ENOENT error with the auto-command when the nsecure-result.json file is manually deleted.</li>
<li>Add child_process to the list of dependencies for üåç hasExternalCapacity flag.</li>
<li>Remove all <code>@types/</code> from unused dependencies list.</li>
</ul>
<h1>What's next ?</h1>
<p>The next version will mainly be used to stabilize and complete the functionality of this version.</p>
<ul>
<li>Add an history to the searchbar.</li>
<li>Add a new size filter (ex: <code>size: &gt;= 32KB</code>).</li>
<li>Fix all bugs and add translation tokens (searchbar).</li>
<li>Add the CLI output for <strong>verify</strong> command.</li>
<li>Add more i18n tokens for the UI.</li>
<li>Add the list of &quot;sensitive&quot; files in the JSON (and the left menu in the UI).</li>
</ul>
<p>One of the next major feature will be to walk the dependency tree by using the package-lock.json (only with the <strong>cwd</strong> command). This feature will bring a lot of new flags to match as possible the usage of <a href=&quot;https://github.com/lirantal/lockfile-lint&quot;>lockfile-lint</a>.</p>
<h1>How to use it ?</h1>
<pre><code class=&quot;language-bash&quot;>$ npm i nsecure -g
$ nsecure auto express
</code></pre>
<p>Please take a look at the complete documentation <a href=&quot;https://escommunity.dev/nsecure/&quot;>here</a>.</p>
<h1>Conclusion</h1>
<p>Thank to all of those who give me valuable feedback. Thank you for taking the time to read my articles too!</p>
<p><a href=&quot;https://github.com/ES-Community/nsecure&quot;>https://github.com/ES-Community/nsecure</a></p>
<p><em>Think to put a star on the github!</em></p>
<p>Best Regards,
Thomas</p>
"
      >
      <article-content/>
  </main>

  <script type="module" src="./../src/components/index.js"></script>
  <script type="module" src="../src/scripts/particules.js"></script>
</body>

</html>