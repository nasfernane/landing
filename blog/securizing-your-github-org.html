<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/index.css" />
  <link rel="stylesheet" href="../css/blog.css" />
  <title>NodeSecure - Blog</title>
</head>

<body>
  <canvas id="network-bg"></canvas>

  <header class="blogHeader">
    <div class="header-background"></div>
    <div class="header-content centered-content">
      <img src="https://avatars.githubusercontent.com/u/85318671?s=200&v=4" alt="NodeSecure Logo"
        style="width:80px;height:80px;border-radius:20px;background:#fff2;box-shadow:0 2px 8px #0002;margin-bottom:1.2rem;">
      <h1>
        NodeSecure Blog
      </h1>
      <p class="subtitle">
        Building a safer Node.js and JavaScript ecosystem
      </p>
      <p class="description">We are a community of developers building free open source tools to secure the Node.js & JavaScript ecosystem. Our area of expertise is <b>SCA</b> (Software Composition Analysis).</p>
      <div class="header-buttons">
        <a href="https://github.com/NodeSecure" target="_blank" title="NodeSecure on GitHub" class="view-on-github">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/github.svg" alt="GitHub"
            style="width:28px;height:28px;filter:invert(1) brightness(2);">
          <span>View on GitHub</span>
        </a>
        <a href="https://discord.gg/4Wn8rjAtB4" target="_blank" title="Join our Discord" class="view-on-discord">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord"
            style="width:28px;height:28px;filter:invert(1) brightness(2);">
          <span>Join Discord</span>
        </a>
        <a href="./index.html" title="Visit our blog" class="view-on-discord">
          <img width="64" height="64" src="https://img.icons8.com/glyph-neue/64/circled-left-2.png"   style="width:28px;height:28px;filter:invert(1) brightness(2);" alt="Back to blog"/>
          <span>Back to blog</span>
        </a>
      </div>
    </div>
  </header>
  <main>
    
    <article>
      <div class="article-content">
        <h1 class="article-title">Securizing your GitHub org</h1>
        <p>Hello ğŸ‘‹</p>
<p>I started open source a bit naively (like everyone I guess ğŸ˜Š).</p>
<p>But the more I progress and the more important/popular some of my projects become ğŸ˜. That's great, but at some point you have to <strong>deal</strong> with a lot of things <strong>related to security</strong> (like Vulnerability disclosure).</p>
<p>You start to hear and see a lot of <strong>scary stories</strong> around you ğŸ˜±. Not to mention all the <strong>acronyms</strong> where you don't understand anything at first ğŸ˜µ (VMT, CVE, SAST, SCA, CNA ...).</p>
<p>As I was working on an open source security project, I put pressure on myself to be ready. Also as a member of the <a href="https://github.com/nodejs/security-wg">Node.js Security WG</a> I thought it was an interesting topic and that I was probably not the only one who was worried about not being up to the task ğŸ˜–.</p>
<p>So I rolled up my sleeves and tackled the problem ğŸ’ª. Here is my feedback/journey on how I improved the security of my <a href="https://github.com/NodeSecure">NodeSecure</a> GitHub organization.</p>
<blockquote>
<p>ğŸ‘€ We use Node.js and JavaScript (but most recommendations are valid for other ecosystems).</p>
</blockquote>
<h2>Security Policy and Vulnerability Disclosure</h2>
<p>Adding a root <code>SECURITY.md</code> file explaining how developers and security researchers should report vulnerability is important. You don't want a security threat to <strong>be turned into a public issue</strong> (This gives you time to analyze and possibly fix <strong>before disclosure</strong>).</p>
<blockquote>
<p>âš ï¸ If you are a developer, never report a security threat using a public GitHub issue. <strong>This is a serious mistake</strong>. This could even put your business/team at <strong>risk</strong>.</p>
</blockquote>
<p>I don't want to bullshit you, so let me share with you the <strong>OpenSSF guide</strong> that helped me set up my first reporting strategy: <a href="https://github.com/ossf/oss-vulnerability-guide/blob/main/maintainer-guide.md">Guide to implementing a coordinated vulnerability disclosure process for open source projects</a>.</p>
<p>I started from scratch by reading this guide and taking inspiration from <a href="https://github.com/ossf/oss-vulnerability-guide/tree/main/templates">their templates</a> ğŸ¤. As a small open source team we don't especially have DNS or mail servers (not even a defined <strong>V</strong>ulnerability <strong>M</strong>anagement <strong>T</strong>eam A.K.A <strong>VMT</strong>).</p>
<p>I was a bit puzzled to put my personal email as I'm not alone ğŸ˜Ÿ. </p>
<p>I quickly learned that Github added a new feature <a href="https://docs.github.com/en/code-security/security-advisories/guidance-on-reporting-and-writing/privately-reporting-a-security-vulnerability">to report/create private security issue</a> ğŸ˜. You can enable it in the <code>Security</code> tab (I think it's also now possible to enable it on every repositories at once).</p>
<p>And this is what it finally looks like:
<img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/imqmjdj2ewiiud0bpmbs.png" alt="NodeSecure SECURITY.md"></p>
<h2>Use OpenSSF scorecard</h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7kdfnqxjora14q8eil20.png" alt="scorecard"></p>
<p>The <a href="https://securityscorecards.dev/">OSSF scorecard</a> initiative is really good to assess your project against security best practices. <a href="https://devopsjournal.io/blog/2022/12/08/Adding-OSSF-scorecard-action-to-your-repo">I am not the first to write about this</a>.</p>
<p>You can easily setup the GitHub action workflow by following those <a href="https://github.com/ossf/scorecard-action#installation">instructions</a>.</p>
<p>Once configured, you will have a set of alerts available in the <code>Security</code> tab.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/i0tib69edbeitcsoomec.png" alt="Scorecard scanning alerts"></p>
<p>This will give you an overview of the different subjects to improve (workflows, dependencies etc). Each of these alerts contains a full description of the actions to be taken to fix the problem.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/000q8acla8raunyu8kva.png" alt="OSSF Scorecard"></p>
<p>I have personally used these recommendations to dig and train myself. The next chapters will help you improve your score.</p>
<blockquote>
<p>ğŸ“¢ By the way <a href="https://github.com/NodeSecure/cli">NodeSecure CLI</a> has a first-class support of the scorecard.</p>
</blockquote>
<h2>ğŸ”“ Enable branch protection</h2>
<p>I am a bad student ğŸ˜³. Almost all of my projects had no branch protection on the <code>main</code> / <code>master</code> branch ğŸ™ˆ.</p>
<blockquote>
<p>To set up the protection, go to <code>Settings</code> &gt; <code>Branches</code> and edit your main branch. </p>
</blockquote>
<p>GitHub has quite a few options on the subject ğŸ˜µ. If you don't know what to choose in terms of options, <strong>don't check anything</strong> (it's <strong>ok</strong> to begin âœ”ï¸).</p>
<p>If you want to be more restrictive, be <strong>careful</strong> because it could block you (some options are only viable in projects with many contributors/reviewers).</p>
<p>As far as I am concerned I often choose:</p>
<ul>
<li>Require a pull request before merging</li>
<li>Require conversation resolution before merging</li>
<li>Require status checks to pass before merging</li>
</ul>
<h2>ğŸ² Workflows Hardening</h2>
<p>I fell down when I saw all that it was necessary to know to secure workflows with GitHub actions ğŸ˜².</p>
<ul>
<li>You must pay attention to the <a href="https://docs.github.com/en/actions/using-jobs/assigning-permissions-to-jobs">permissions granted to your jobs / GITHUB_TOKEN</a></li>
<li><a href="https://michaelheap.com/ensure-github-actions-pinned-sha/">Ensure your GitHub Actions are pinned to a SHA</a></li>
<li>Hardening the runner (see the <a href="https://blog.stepsecurity.io/announcing-general-availability-of-harden-runner-a7597a1410da">StepSecurity HardenRunner</a>)</li>
<li>Probably a lot of other stuff I haven't had time to see yet ğŸ˜†</li>
</ul>
<p>Fortunately there is a <a href="https://app.stepsecurity.io/">great free online tool</a> that help you by doing all the hard work (it will open a pull-request and automatically fix issues).</p>
<p>{% tweet <a href="https://twitter.com/fraxken/status/1617557370728767488">https://twitter.com/fraxken/status/1617557370728767488</a> %}</p>
<p>The tool was created by <a href="https://www.stepsecurity.io/">StepSecurity</a>. I had the opportunity to talk with the CEO and they listen to the maintainers which is really cool. 
Thanks to them â¤ï¸!</p>
<h2>Configure Dependabot</h2>
<p>It is recommended to use <a href="https://github.blog/2020-06-01-keep-all-your-packages-up-to-date-with-dependabot/">Dependabot</a> for updating your dependencies and GitHub actions (yes, it also supports updating workflows in a secure way ğŸ˜).</p>
<p>You only need to add a <code>.github/dependabot.yml</code> config file. Personally I recommend a <strong>weekly</strong> interval (with a lot of projects <strong>daily is a bit horrible</strong>).</p>
<pre><code class="language-yml">version: 2
updates:
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly

  - package-ecosystem: npm
    directory: /
    schedule:
      interval: weekly
</code></pre>
<p>The StepSecurity tool we have seen in the previous chapter is also capable of doing it ğŸš€. </p>
<hr>
<p>Also, think to enable <a href="https://docs.github.com/en/code-security/dependabot/dependabot-alerts/about-dependabot-alerts">Dependabot alerts</a> in the <code>Security</code> tab. This will allow the bot to open pull-request to fix known vulnerabilities by looking at your dependencies (<strong>referenced in package.json or others</strong>).</p>
<h2>ğŸ”¬ Adding CodeQL scanning</h2>
<p>To enhance security even more you can add a <a href="https://snyk.io/learn/application-security/static-application-security-testing/">SAST</a> tool like <a href="https://codeql.github.com/">CodeQL</a>. Like scorecard it will report security scanning alert but for your codebase.</p>
<p>Here an example:
<img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qsycrb5ew1tztvr7rj6z.png" alt="prototype-pollution"></p>
<p>A great way to make sure that newly added code does not contain vulnerabilities that were <strong>obvious to detect</strong>.</p>
<blockquote>
<p>ğŸ‘€ Note that once again StepSecurity can set up the workflow for you.</p>
</blockquote>
<h2>ğŸ“œ Enable Security advisories (and others)</h2>
<p>Github Security tab as a lot of cool features that help you maintain the security of your project. If you have followed all my previous chapters, most of them should be enabled now.</p>
<p>Make sure to also enable <code>Secret scanning alerts</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/utrx752lf9m382tbpunn.png" alt="Github Security"></p>
<p>For an organization many of these parameters can be forced on all repositories. Go to <code>Settings</code> &gt; <code>Code security and analysis</code>. You will have the options to enable/disable all.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a8f5cpwva9te0m15yb0s.png" alt="Github Security"></p>
<h2>ğŸ’¡ OpenSSF Best Pratices program</h2>
<p>Previously known as CII-Best-Practices, this program indicates that the project uses a set of security-focused best development practices for open source software.</p>
<p>So I registered my first project on the <a href="https://bestpractices.coreinfrastructure.org/en">website</a>. It was a good surprise because it allowed me to question the quality of my documentation and tests ğŸ˜¬.</p>
<p>Seeing the different levels and questions really helps you think about what you're missing (and possibly learn about the concepts you don't know about yet.. Like <a href="https://snyk.io/blog/building-sbom-open-source-supply-chain-security/">SBOM</a>).</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9pn6g2gcoyelkniwopy0.png" alt="CII-Best-Practices"></p>
<p>I am still working on completing the first step/badge for the CLI project which now has a score of <strong>8.7</strong> out of <strong>10</strong> ğŸ‰ on the OpenSSF scorecard.</p>
<h2>ğŸ¯ Conclusion</h2>
<p>That's it for this article. I've covered what I've done/learned in the last couple of months. Here are some really cool additional links ğŸ’ƒ:</p>
<ul>
<li><a href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Concise-Guide-for-Evaluating-Open-Source-Software.md#readme">Concise Guide for Evaluating Open Source Software 2023-01-03</a></li>
<li><a href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Concise-Guide-for-Developing-More-Secure-Software.md#readme">Concise Guide for Developing More Secure Software 2023-01-03</a></li>
</ul>
<p>If you work with NPM, I invite you to read our latest article about package managers:</p>
<p><a href="https://dev.to/nodesecure/everything-you-need-to-know-package-managers-286c" target="_blank" rel="noopener" class="external-article-link">â†ª Read article</a></p>
<p>Obviously, I probably <strong>still have a lot to learn</strong>. But I hope this will help other maintainers/developers â¤ï¸.</p>
<p>ğŸ™ Thanks for reading me ğŸ™</p>

      </div>
    </article>
  </main>

  <script type="module" src="../src/particules.js"></script>
</body>

</html>